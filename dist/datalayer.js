"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function i(a,s,c){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(f)return f(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[e]={exports:{}};a[e][0].call(o.exports,function(t){return u(a[e][1][t]||t)},o,o.exports,i,a,s,c)}return s[e].exports}for(var f="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,te,ee){(function(t){var r="__lodash_hash_undefined__",j=1,d=2,n=9007199254740991,g="[object Arguments]",b="[object Array]",o="[object AsyncFunction]",m="[object Boolean]",O="[object Date]",w="[object Error]",i="[object Function]",a="[object GeneratorFunction]",A="[object Map]",L="[object Number]",e="[object Null]",E="[object Object]",s="[object Promise]",c="[object Proxy]",T="[object RegExp]",S="[object Set]",z="[object String]",M="[object Symbol]",u="[object Undefined]",f="[object WeakMap]",C="[object ArrayBuffer]",N="[object DataView]",l=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[g]=_[b]=_[C]=_[m]=_[N]=_[O]=_[w]=_[i]=_[A]=_[L]=_[E]=_[T]=_[S]=_[z]=_[f]=!1;var h="object"==_typeof(t)&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,v=h||y||Function("return this")(),I="object"==_typeof(ee)&&ee&&!ee.nodeType&&ee,k=I&&"object"==_typeof(te)&&te&&!te.nodeType&&te,F=k&&k.exports===I,x=F&&h.process,P=function(){try{return x&&x.binding&&x.binding("util")}catch(t){}}(),R=P&&P.isTypedArray;function U(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function D(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var H,V,B,q=Array.prototype,G=Function.prototype,J=Object.prototype,W=v["__core-js_shared__"],Y=G.toString,K=J.hasOwnProperty,Q=(H=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",X=J.toString,Z=RegExp("^"+Y.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=F?v.Buffer:void 0,et=v.Symbol,nt=v.Uint8Array,rt=J.propertyIsEnumerable,ot=q.splice,it=et?et.toStringTag:void 0,at=Object.getOwnPropertySymbols,st=tt?tt.isBuffer:void 0,ct=(V=Object.keys,B=Object,function(t){return V(B(t))}),ut=Rt(v,"DataView"),ft=Rt(v,"Map"),lt=Rt(v,"Promise"),pt=Rt(v,"Set"),_t=Rt(v,"WeakMap"),ht=Rt(Object,"create"),yt=Ht(ut),vt=Ht(ft),dt=Ht(lt),gt=Ht(pt),bt=Ht(_t),jt=et?et.prototype:void 0,mt=jt?jt.valueOf:void 0;function Ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new At;++e<n;)this.add(t[e])}function Et(t){var e=this.__data__=new wt(t);this.size=e.size}function Tt(t,e){var n=qt(t),r=!n&&Bt(t),o=!n&&!r&&Gt(t),i=!n&&!r&&!o&&Xt(t),a=n||r||o||i,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=s.length;for(var u in t)!e&&!K.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$t(u,c))||s.push(u);return s}function St(t,e){for(var n=t.length;n--;)if(Vt(t[n][0],e))return n;return-1}function zt(t,e,n){var r=e(t);return qt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}function Mt(t){return null==t?void 0===t?u:e:it&&it in Object(t)?function(t){var e=K.call(t,it),n=t[it];try{var r=!(t[it]=void 0)}catch(t){}var o=X.call(t);r&&(e?t[it]=n:delete t[it]);return o}(t):function(t){return X.call(t)}(t)}function Ct(t){return Kt(t)&&Mt(t)==g}function Nt(t,e,n,r,o){return t===e||(null==t||null==e||!Kt(t)&&!Kt(e)?t!=t&&e!=e:function(t,e,n,r,o,i){var a=qt(t),s=qt(e),c=a?b:Dt(t),u=s?b:Dt(e),f=(c=c==g?E:c)==E,l=(u=u==g?E:u)==E,p=c==u;if(p&&Gt(t)){if(!Gt(e))return!1;f=!(a=!0)}if(p&&!f)return i=i||new Et,a||Xt(t)?Ft(t,e,n,r,o,i):function(t,e,n,r,o,i,a){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C:return!(t.byteLength!=e.byteLength||!i(new nt(t),new nt(e)));case m:case O:case L:return Vt(+t,+e);case w:return t.name==e.name&&t.message==e.message;case T:case z:return t==e+"";case A:var s=D;case S:var c=r&j;if(s=s||$,t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=d,a.set(t,e);var f=Ft(s(t),s(e),r,o,i,a);return a.delete(t),f;case M:if(mt)return mt.call(t)==mt.call(e)}return!1}(t,e,c,n,r,o,i);if(!(n&j)){var _=f&&K.call(t,"__wrapped__"),h=l&&K.call(e,"__wrapped__");if(_||h){var y=_?t.value():t,v=h?e.value():e;return i=i||new Et,o(y,v,n,r,i)}}return p&&(i=i||new Et,function(t,e,n,r,o,i){var a=n&j,s=xt(t),c=s.length,u=xt(e).length;if(c!=u&&!a)return!1;var f=c;for(;f--;){var l=s[f];if(!(a?l in e:K.call(e,l)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var _=!0;i.set(t,e),i.set(e,t);var h=a;for(;++f<c;){l=s[f];var y=t[l],v=e[l];if(r)var d=a?r(v,y,l,e,t,i):r(y,v,l,t,e,i);if(!(void 0===d?y===v||o(y,v,n,r,i):d)){_=!1;break}h=h||"constructor"==l}if(_&&!h){var g=t.constructor,b=e.constructor;g!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(_=!1)}return i.delete(t),i.delete(e),_}(t,e,n,r,o,i))}(t,e,n,r,Nt,o))}function It(t){return!(!Yt(t)||function(t){return!!Q&&Q in t}(t))&&(Jt(t)?Z:l).test(Ht(t))}function kt(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||J;return t===n}(t))return ct(t);var e=[];for(var n in Object(t))K.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ft(t,e,r,o,i,a){var n=r&j,s=t.length,c=e.length;if(s!=c&&!(n&&s<c))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var f=-1,l=!0,p=r&d?new Lt:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var _=t[f],h=e[f];if(o)var y=n?o(h,_,f,e,t,a):o(_,h,f,t,e,a);if(void 0!==y){if(y)continue;l=!1;break}if(p){if(!U(e,function(t,e){if(n=e,!p.has(n)&&(_===t||i(_,t,r,o,a)))return p.push(e);var n})){l=!1;break}}else if(_!==h&&!i(_,h,r,o,a)){l=!1;break}}return a.delete(t),a.delete(e),l}function xt(t){return zt(t,Zt,Ut)}function Pt(t,e){var n=t.__data__;return function(t){var e=_typeof(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Rt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return It(n)?n:void 0}Ot.prototype.clear=function(){this.__data__=ht?ht(null):{},this.size=0},Ot.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ot.prototype.get=function(t){var e=this.__data__;if(ht){var n=e[t];return n===r?void 0:n}return K.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return ht?void 0!==e[t]:K.call(e,t)},Ot.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ht&&void 0===e?r:e,this},wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=St(e,t);return!(n<0)&&(n==e.length-1?e.pop():ot.call(e,n,1),--this.size,!0)},wt.prototype.get=function(t){var e=this.__data__,n=St(e,t);return n<0?void 0:e[n][1]},wt.prototype.has=function(t){return-1<St(this.__data__,t)},wt.prototype.set=function(t,e){var n=this.__data__,r=St(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},At.prototype.clear=function(){this.size=0,this.__data__={hash:new Ot,map:new(ft||wt),string:new Ot}},At.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},At.prototype.get=function(t){return Pt(this,t).get(t)},At.prototype.has=function(t){return Pt(this,t).has(t)},At.prototype.set=function(t,e){var n=Pt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Lt.prototype.add=Lt.prototype.push=function(t){return this.__data__.set(t,r),this},Lt.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new wt,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof wt){var r=n.__data__;if(!ft||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new At(r)}return n.set(t,e),this.size=n.size,this};var Ut=at?function(e){return null==e?[]:(e=Object(e),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}(at(e),function(t){return rt.call(e,t)}))}:function(){return[]},Dt=Mt;function $t(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||p.test(t))&&-1<t&&t%1==0&&t<e}function Ht(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vt(t,e){return t===e||t!=t&&e!=e}(ut&&Dt(new ut(new ArrayBuffer(1)))!=N||ft&&Dt(new ft)!=A||lt&&Dt(lt.resolve())!=s||pt&&Dt(new pt)!=S||_t&&Dt(new _t)!=f)&&(Dt=function(t){var e=Mt(t),n=e==E?t.constructor:void 0,r=n?Ht(n):"";if(r)switch(r){case yt:return N;case vt:return A;case dt:return s;case gt:return S;case bt:return f}return e});var Bt=Ct(function(){return arguments}())?Ct:function(t){return Kt(t)&&K.call(t,"callee")&&!rt.call(t,"callee")},qt=Array.isArray;var Gt=st||function(){return!1};function Jt(t){if(!Yt(t))return!1;var e=Mt(t);return e==i||e==a||e==o||e==c}function Wt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=n}function Yt(t){var e=_typeof(t);return null!=t&&("object"==e||"function"==e)}function Kt(t){return null!=t&&"object"==_typeof(t)}var Qt,Xt=R?(Qt=R,function(t){return Qt(t)}):function(t){return Kt(t)&&Wt(t.length)&&!!_[Mt(t)]};function Zt(t){return function(t){return null!=t&&Wt(t.length)&&!Jt(t)}(t)?Tt(t):kt(t)}te.exports=function(t,e){return Nt(t,e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,Ut,Dt){(function(t){var r="__lodash_hash_undefined__",o=9007199254740991,e="[object Arguments]",n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Null]",y="[object Object]",c="[object Proxy]",u="[object Undefined]",f=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[e]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p[i]=p["[object Map]"]=p["[object Number]"]=p[y]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;var _="object"==_typeof(t)&&t&&t.Object===Object&&t,h="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,v=_||h||Function("return this")(),d="object"==_typeof(Dt)&&Dt&&!Dt.nodeType&&Dt,g=d&&"object"==_typeof(Ut)&&Ut&&!Ut.nodeType&&Ut,b=g&&g.exports===d,j=b&&_.process,m=function(){try{var t=g&&g.require&&g.require("util").types;return t||j&&j.binding&&j.binding("util")}catch(t){}}(),O=m&&m.isTypedArray;var w,A,L,E=Array.prototype,T=Function.prototype,S=Object.prototype,z=v["__core-js_shared__"],M=T.toString,C=S.hasOwnProperty,N=(w=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",I=S.toString,k=M.call(Object),F=RegExp("^"+M.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=b?v.Buffer:void 0,P=v.Symbol,R=v.Uint8Array,U=x?x.allocUnsafe:void 0,D=(A=Object.getPrototypeOf,L=Object,function(t){return A(L(t))}),$=Object.create,H=S.propertyIsEnumerable,V=E.splice,B=P?P.toStringTag:void 0,q=function(){try{var t=vt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),G=x?x.isBuffer:void 0,J=Math.max,W=Date.now,Y=vt(v,"Map"),K=vt(Object,"create"),Q=function(t){if(!Ct(t))return{};if($)return $(t);X.prototype=t;var e=new X;return X.prototype=void 0,e};function X(){}function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t){var e=this.__data__=new tt(t);this.size=e.size}function rt(t,e){var n=Et(t),r=!n&&Lt(t),o=!n&&!r&&St(t),i=!n&&!r&&!o&&kt(t),a=n||r||o||i,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=s.length;for(var u in t)!e&&!C.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||dt(u,c))||s.push(u);return s}function ot(t,e,n){(void 0===n||At(t[e],n))&&(void 0!==n||e in t)||at(t,e,n)}function it(t,e){for(var n=t.length;n--;)if(At(t[n][0],e))return n;return-1}function at(t,e,n){"__proto__"==e&&q?q(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}Z.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},Z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Z.prototype.get=function(t){var e=this.__data__;if(K){var n=e[t];return n===r?void 0:n}return C.call(e,t)?e[t]:void 0},Z.prototype.has=function(t){var e=this.__data__;return K?void 0!==e[t]:C.call(e,t)},Z.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=K&&void 0===e?r:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,n=it(e,t);return!(n<0)&&(n==e.length-1?e.pop():V.call(e,n,1),--this.size,!0)},tt.prototype.get=function(t){var e=this.__data__,n=it(e,t);return n<0?void 0:e[n][1]},tt.prototype.has=function(t){return-1<it(this.__data__,t)},tt.prototype.set=function(t,e){var n=this.__data__,r=it(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(Y||tt),string:new Z}},et.prototype.delete=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return yt(this,t).get(t)},et.prototype.has=function(t){return yt(this,t).has(t)},et.prototype.set=function(t,e){var n=yt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},nt.prototype.clear=function(){this.__data__=new tt,this.size=0},nt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},nt.prototype.get=function(t){return this.__data__.get(t)},nt.prototype.has=function(t){return this.__data__.has(t)},nt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof tt){var r=n.__data__;if(!Y||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new et(r)}return n.set(t,e),this.size=n.size,this};var st,ct=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var s=i[st?a:++r];if(!1===e(o[s],s,o))break}return t};function ut(t){return null==t?void 0===t?u:s:B&&B in Object(t)?function(t){var e=C.call(t,B),n=t[B];try{var r=!(t[B]=void 0)}catch(t){}var o=I.call(t);r&&(e?t[B]=n:delete t[B]);return o}(t):function(t){return I.call(t)}(t)}function ft(t){return Nt(t)&&ut(t)==e}function lt(t){return!(!Ct(t)||function(t){return!!N&&N in t}(t))&&(zt(t)?F:f).test(function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function pt(t){if(!Ct(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=gt(t),n=[];for(var r in t)("constructor"!=r||!e&&C.call(t,r))&&n.push(r);return n}function _t(r,o,i,a,s){r!==o&&ct(o,function(t,e){if(s=s||new nt,Ct(t))!function(t,e,n,r,o,i,a){var s=bt(t,n),c=bt(e,n),u=a.get(c);if(u)return ot(t,n,u);var f=i?i(s,c,n+"",t,e,a):void 0,l=void 0===f;if(l){var p=Et(c),_=!p&&St(c),h=!p&&!_&&kt(c);f=c,p||_||h?f=Et(s)?s:function(t){return Nt(t)&&Tt(t)}(s)?function(t,e){var n=-1,r=t.length;e=e||Array(r);for(;++n<r;)e[n]=t[n];return e}(s):_?function(t,e){if(e)return t.slice();var n=t.length,r=U?U(n):new t.constructor(n);return t.copy(r),r}(c,!(l=!1)):h?function(t,e){var n=e?function(t){var e=new t.constructor(t.byteLength);return new R(e).set(new R(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(c,!(l=!1)):[]:function(t){if(!Nt(t)||ut(t)!=y)return!1;var e=D(t);if(null===e)return!0;var n=C.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&M.call(n)==k}(c)||Lt(c)?Lt(f=s)?f=function(t){return function(t,e,n,r){var o=!n;n=n||{};var i=-1,a=e.length;for(;++i<a;){var s=e[i],c=r?r(n[s],t[s],s,n,t):void 0;void 0===c&&(c=t[s]),o?at(n,s,c):(l=c,void 0,p=(u=n)[f=s],C.call(u,f)&&At(p,l)&&(void 0!==l||f in u)||at(u,f,l))}var u,f,l,p;return n}(t,Ft(t))}(s):Ct(s)&&!zt(s)||(f=function(t){return"function"!=typeof t.constructor||gt(t)?{}:Q(D(t))}(c)):l=!1}l&&(a.set(c,f),o(f,c,r,i,a),a.delete(c));ot(t,n,f)}(r,o,e,i,_t,a,s);else{var n=a?a(bt(r,e),t,e+"",r,o,s):void 0;void 0===n&&(n=t),ot(r,e,n)}},Ft)}function ht(t,e){return wt(function(i,a,s){return a=J(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,n=J(t.length-a,0),r=Array(n);++e<n;)r[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=s(r),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(i,this,o)}}(t,e,Rt),t+"")}function yt(t,e){var n=t.__data__;return function(t){var e=_typeof(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return lt(n)?n:void 0}function dt(t,e){var n=_typeof(t);return!!(e=null==e?o:e)&&("number"==n||"symbol"!=n&&l.test(t))&&-1<t&&t%1==0&&t<e}function gt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||S)}function bt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var jt,mt,Ot,wt=(jt=q?function(t,e){return q(t,"toString",{configurable:!0,enumerable:!1,value:function(t){return function(){return t}}(e),writable:!0})}:Rt,Ot=mt=0,function(){var t=W(),e=16-(t-Ot);if(Ot=t,0<e){if(800<=++mt)return arguments[0]}else mt=0;return jt.apply(void 0,arguments)});function At(t,e){return t===e||t!=t&&e!=e}var Lt=ft(function(){return arguments}())?ft:function(t){return Nt(t)&&C.call(t,"callee")&&!H.call(t,"callee")},Et=Array.isArray;function Tt(t){return null!=t&&Mt(t.length)&&!zt(t)}var St=G||function(){return!1};function zt(t){if(!Ct(t))return!1;var e=ut(t);return e==i||e==a||e==n||e==c}function Mt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=o}function Ct(t){var e=_typeof(t);return null!=t&&("object"==e||"function"==e)}function Nt(t){return null!=t&&"object"==_typeof(t)}var It,kt=O?(It=O,function(t){return It(t)}):function(t){return Nt(t)&&Mt(t.length)&&!!p[ut(t)]};function Ft(t){return Tt(t)?rt(t,!0):pt(t)}var xt,Pt=(xt=function(t,e,n){_t(t,e,n)},ht(function(t,e){var n=-1,r=e.length,o=1<r?e[r-1]:void 0,i=2<r?e[2]:void 0;for(o=3<xt.length&&"function"==typeof o?(r--,o):void 0,i&&function(t,e,n){if(!Ct(n))return!1;var r=_typeof(e);return!!("number"==r?Tt(n)&&dt(e,n.length):"string"==r&&e in n)&&At(n[e],t)}(e[0],e[1],i)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var a=e[n];a&&xt(t,a,n,o)}return t}));function Rt(t){return t}Ut.exports=Pt}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){var r=t("lodash.merge"),o=t("lodash.isequal"),a={};a.Item=t("./DataLayerItem").item,a.constants=t("./DataLayerConstants"),a.Manager=function(t){this._config=t,this._initialize()},a.Manager.prototype._initialize=function(){var t=this;Array.isArray(t._config.dataLayer)||(t._config.dataLayer=[]),t._dataLayer=t._config.dataLayer,t._state={},t._listeners={},t._augment(),t._processItems();var e=new a.Item({event:a.constants.event.READY});t._triggerListeners(e)},a.Manager.prototype._updateState=function(t){r(this._state,t.config.data)},a.Manager.prototype._augment=function(){var i=this;i._dataLayer.push=function(t){var r=arguments,o=arguments;if(Object.keys(r).forEach(function(t){var e=r[t],n=new a.Item(e);i._processItem(n),n.type!==a.constants.itemType.LISTENER_ON&&n.type!==a.constants.itemType.LISTENER_OFF&&n.valid||delete o[t]}),o[0])return Array.prototype.push.apply(this,o)},i._dataLayer.getState=function(){return JSON.parse(JSON.stringify(i._state))}},a.Manager.prototype._processItems=function(){for(var t=0;t<this._dataLayer.length;t++){var e=new a.Item(this._dataLayer[t],t);this._processItem(e),e.type!==a.constants.itemType.LISTENER_ON&&e.type!==a.constants.itemType.LISTENER_OFF&&e.valid||(this._dataLayer.splice(t,1),t--)}},a.Manager.prototype._processItem=function(t){var e=this;if(t.valid){({data:function(t){e._updateState(t),e._triggerListeners(t)},event:function(t){t.config.data&&e._updateState(t),e._triggerListeners(t)},listenerOn:function(t){e._processListenerOn(t)},listenerOff:function(t){e._unregisterListener(t)}})[t.type](t)}else{var n="The following item cannot be handled by the data layer because it does not have a valid format: "+JSON.stringify(t.config);console.error(n)}},a.Manager.prototype._processListenerOn=function(t){var e=t.config.scope;switch(e=e||a.constants.listenerScope.FUTURE){case a.constants.listenerScope.PAST:this._triggerListener(t);break;case a.constants.listenerScope.FUTURE:this._registerListener(t);break;case a.constants.listenerScope.ALL:this._triggerListener(t),this._registerListener(t)}},a.Manager.prototype._triggerListener=function(t){var e=t.index;if(!(0===e||0===this._dataLayer.length||e>this._dataLayer.length-1))for(var n=e||this._dataLayer.length,r=0;r<n;r++){var o=this._dataLayer[r],i=new a.Item(o,r);this._callListenerHandler(t,i)}},a.Manager.prototype._triggerListeners=function(e){var n=this;n._getTriggeredEvents(e).forEach(function(t){n._listeners[t]&&n._listeners[t].forEach(function(t){n._callListenerHandler(t,e)})})},a.Manager.prototype._callListenerHandler=function(t,e){if(this._isMatching(t,e)){var n=t.config,r=e.config,o=JSON.parse(JSON.stringify(r));n.handler(o)}},a.Manager.prototype._isMatching=function(t,e){var n=t.config,r=e.config,o=!1;return e.type===a.constants.itemType.DATA?n.on===a.constants.event.CHANGE&&(o=!0):e.type===a.constants.itemType.EVENT&&(n.on!==a.constants.event.EVENT&&n.on!==r.event||(o=!0),r.data&&n.on===a.constants.event.CHANGE&&(o=!0)),o},a.Manager.prototype._getTriggeredEvents=function(t){var e=[],n=t.config;return t.type===a.constants.itemType.DATA?e.push(a.constants.event.CHANGE):t.type===a.constants.itemType.EVENT&&(e.push(n.event),e.push(a.constants.event.EVENT),n.data&&e.push(a.constants.event.CHANGE)),e},a.Manager.prototype._registerListener=function(t){var e=t.config.on;this._isRegisteredListener(t)||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),console.debug("listener registered on: ",e))},a.Manager.prototype._unregisterListener=function(t){for(var e=this._getListenersMatchingListenerOff(t),n=t.config.off,r=e.length-1;-1<r;r--)-1<e[r]&&(this._listeners[n].splice(e[r],1),console.debug("listener unregistered on: ",n))},a.Manager.prototype._getListenersMatchingListenerOff=function(t){var e=[],n=t.config.off;if(this._listeners[n])for(var r=0;r<this._listeners[n].length;r++){var o=this._listeners[n][r];this._listenerOffMatchesListenerOn(t,o)&&e.push(r)}return e},a.Manager.prototype._listenerOffMatchesListenerOn=function(t,e){for(var n=t.config,r=e.config,o=0;o<Object.keys(n).length;o++){var i=Object.keys(n)[o];if("off"!==i){if(n[i]!==r[i])return!1}else if(n.off!==r.on)return!1}return!0},a.Manager.prototype._isRegisteredListener=function(t){var e=t.config.on;if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++){var r=this._listeners[e][n];if(o(t.config,r.config))return!0}return!1},new a.Manager({dataLayer:window.dataLayer}),e.exports=a},{"./DataLayerConstants":4,"./DataLayerItem":5,"lodash.isequal":1,"lodash.merge":2}],4:[function(t,e,n){e.exports={itemType:{DATA:"data",EVENT:"event",LISTENER_ON:"listenerOn",LISTENER_OFF:"listenerOff"},event:{CHANGE:"datalayer:change",EVENT:"datalayer:event",READY:"datalayer:ready"},listenerScope:{PAST:"past",FUTURE:"future",ALL:"all"}}},{}],5:[function(t,e,n){var a={};a.constants=t("./DataLayerConstants");var s={data:{type:"object"}},c={event:{type:"string"},info:{type:"object",optional:!0},data:{type:"object",optional:!0}},u={on:{type:"string"},handler:{type:"function"},scope:{type:"string",values:["past","future","all"],optional:!0},selector:{type:"string",optional:!0}},f={off:{type:"string"},handler:{type:"function",optional:!0},scope:{type:"string",values:["past","future","all"],optional:!0},selector:{type:"string",optional:!0}},r=function(){function i(t,e){_classCallCheck(this,i);var n,r,o=this;o._config=t,o._type=(n=t,l.itemConfigMatchesConstraints(n,s)?r=a.constants.itemType.DATA:l.itemConfigMatchesConstraints(n,c)?r=a.constants.itemType.EVENT:l.itemConfigMatchesConstraints(n,u)?r=a.constants.itemType.LISTENER_ON:l.itemConfigMatchesConstraints(n,f)&&(r=a.constants.itemType.LISTENER_OFF),r),o._index=e,o._valid=!!o._type}return _createClass(i,[{key:"config",get:function(){return this._config}},{key:"type",get:function(){return this._type}},{key:"valid",get:function(){return this._valid}},{key:"index",get:function(){return this._index}}]),i}(),l={itemConfigMatchesConstraints:function(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var o=n[r],i=e[o].type,a=e[o].values,s=!e[o].optional,c=t[o],u=_typeof(c);if(s){if(!c||u!==i||a&&!a.includes(c))return!1}else if(c&&(u!==i||a&&!a.includes(c)))return!1}return!l.itemConfigHasCustomProperties(t,e)},itemConfigHasCustomProperties:function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length>r.length)return!0;for(var o=0;o<n.length;o++){for(var i=n[o],a=!1,s=0;s<r.length;s++){if(i===r[s]){a=!0;break}}if(!a)return!0}return!1}};e.exports={item:r,utils:l}},{"./DataLayerConstants":4}]},{},[3]);
//# sourceMappingURL=datalayer.js.map
